# 使用网盘同步数据库说明
- [**坚果云网址**](https://www.jianguoyun.com/)
- 坚果云WebDAV服务器网址：https://dav.jianguoyun.com/dav/
- [**URL转码网址**](http://tool.chinaz.com/Tools/Unicode.aspx)
- [**微软网址**](https://login.live.com/)
### 电脑版KeePass用微软OneDrive数据库同步的方法：
- 方法一：使用微软账户登录电脑，把数据放在%Userprofile%\OneDrive（推荐）
- 方法二：使用KeeAnywhere插件和KeePassOneDriveSync插件
	- [**KeeAnywhere插件网址**](https://github.com/Kyrodan/KeeAnywhere/releases)
	- [**KeePassOneDriveSync插件网址**](https://github.com/KoenZomers/KeePassOneDriveSync/releases)
- 因为不可描述的原因，国外网盘速度不如国内网盘快，所以推荐用坚果云同步数据库		
______________________________________________________________________________
### 安卓版：
- 删除数据库，缓存文件夹的数据库不会删除。数据库在另一台手机或电脑修改后需要完全退出应用或同步数据库才会同步
- 云盘数据库调用步骤：（下载数据库文件到缓存文件夹，Keepass2Android调用缓存文件夹的数据库文件）

******************************************************************************
### 电脑版：
- **电脑版数据库路径有中文字符同步出错说明：**
	- 数据库路径有中文字符会出现同步出错（英文文件夹下的中文文件名或中文文件夹下的英文文件名写入临时文件无法替换原文件或在英文文件夹下有些中文字符替换成乱码）
- **数据库路径有中文字符出现同步出错解决方法：**
	- 方法一：中文字符转URL编码（推荐）
	- 方法二：在【工具】→【选项】→【高级】，下拉到【文件输入/输出连接】，把【写入数据库时使用文件交换（先写入临时文件再替换原文件，以防意外）】取消勾选（手机临时文件在本地）
______________________________________________________________________________
- **电脑和安卓同时打开同步的数据库，安卓修改数据库，电脑最好不要保存数据库（下载安卓修改的数据库，上传电脑版修改的数据库但条目和群组未修改，每次保存数据库MD5值变动），直接关闭后再打开数据库（下载数据库）（推荐）**
______________________________________________________________________________
### 华硕路由器外挂硬盘同步数据库：
- 安卓手机可以使用华硕云webdav，必须加上数据库路径，（ssh密码可以连接，密钥无法连接）
- 电脑版用smb，（ssh用6增加对SFTP的支持（SftpSync），同步速度很慢，ssh密码可以连接，密钥无法连接）
- 电脑版用webdav无法同步保存数据库（上传数据库）（提示远程服务器返回错误：（417）Expectation Failed）
- 电脑版用webdav可以打开数据库（下载数据库）
______________________________________________________________________________
- **使用webdav同步数据库，使用自动导出数据库（KdbxLite）插件把数据库导出至webdav同步数据库文件夹**
- **使用自动备份数据库（DataBaseBackup ）插件或自动备份数据库（KPSimpleBackup）把数据库备份至电脑OneDrive文件夹**
______________________________________________________________________________
### 关于同步的上传下载次数：
- **电脑端无修改或修改同步：**
	- 有导出插件：
		- 上传二次
		- 下载五次
	- 无导出插件：
		- 上传一次
		- 下载四次
- **安卓版修改，电脑端同步：**
	- 有导出插件：
		- 上传二次
		- 下载六次
	- 无有导出插件：
		- 上传一次
		- 下载五次
- **电脑版打开数据库，安卓版打开数据库，安卓版未修改同步：**
	- 下载一次
- **电脑版修改，安卓版同步：**
	- 下载二次
- **电脑版修改，安卓版打开数据库：**
	- 下载一次
- **安卓版修改同步电脑版：**
	- 上传一次
	- 下载一次